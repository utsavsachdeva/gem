{% extends 'base.html' %}

{% block title %}View Campaign{% endblock %}

{% block content %}

<h1 class="display-4 mt-4">Campaign Details</h1>

<div class="card mt-3">
    <div class="card-header">
        <h2>{{ campaign.name }}</h2>
        <p>
            <span class="badge bg-secondary">ID: {{ campaign.id }}</span> 
            <span class="badge bg-info">Sponsor: {{ campaign.sponsor.username }}</span>
            <span class="badge bg-light text-dark">Visibility: {{ campaign.visibility }}</span>
        </p>
    </div>
    <div class="card-body">
        <p><strong>Description:</strong> {{ campaign.description }}</p>
        <p><strong>Start Date:</strong> {{ campaign.start_date.strftime('%Y-%m-%d') }}</p>
        <p><strong>End Date:</strong> {{ campaign.end_date.strftime('%Y-%m-%d') }}</p>
        <p><strong>Budget:</strong> ${{ campaign.budget }}</p>
        <p><strong>Goals:</strong> {{ campaign.goals }}</p>
    </div>
</div>

<h2 class="mt-4">Ad Requests</h2>
<div class="mt-3">
    <a href="{{ url_for('admin.manage_campaigns') }}" class="btn btn-secondary">Back to Campaigns</a>
</div>
{% if campaign.ad_requests %}
<table class="table table-striped mt-3">
    <thead>
        <tr>
            <th>ID</th>
            <th>Influencer</th>
            <th>Payment Amount</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for ad_request in campaign.ad_requests %}
        <tr>
            <td>{{ ad_request.id }}</td>
            <td>{{ ad_request.influencer.username }}</td>
            <td>{{ ad_request.payment_amount }}</td>
            <td>{{ ad_request.status }}</td>
            <td>
                <a href="{{ url_for('admin.view_ad_request', ad_request_id=ad_request.id) }}" class="btn btn-sm btn-outline-info">View</a>
                <a href="{{ url_for('admin.edit_ad_request', ad_request_id=ad_request.id) }}" class="btn btn-sm btn-outline-primary">Edit</a>
                <a href="{{ url_for('admin.delete_ad_request', ad_request_id=ad_request.id) }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this ad request?')">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="mt-3">No ad requests for this campaign yet.</p>
{% endif %}

{% endblock %}
